import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-BELN-p3S.js";const h={};function e(t,s){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="实时笔记" tabindex="-1"><a class="header-anchor" href="#实时笔记"><span>实时笔记</span></a></h1><h2 id="_20250514" tabindex="-1"><a class="header-anchor" href="#_20250514"><span>20250514</span></a></h2><p>SYSTEM 权限的进程运行在 Session 0，和用户 Session 隔离</p><p>而桌面用户是从 Session 1 或更高编号开始的</p><p>由于会话隔离，Session 0 中的进程无法接收来自交互桌面的输入</p><h2 id="_20250517" tabindex="-1"><a class="header-anchor" href="#_20250517"><span>20250517</span></a></h2><p>VScode 1.86 版本的 remote 要求 glibc 2.28 及以上，(libstdc++.so)GLIBCXX 3.4.25及以上</p><p>我们可以利用 patchelf 手动指定动态库，避免了重新编译系统的 glibc</p><ol><li><p>下载较新的glibc库</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 选择要下载的glibc版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">镜像链接：https://mirror.tuna.tsinghua.edu.cn/ubuntu/pool/main/g/glibc/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://mirror.tuna.tsinghua.edu.cn/ubuntu/pool/main/g/glibc/libc6_2.31-0ubuntu9.17_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解压</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libs/libc6_2.31-0ubuntu9.17_amd64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dpkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libc6_2.31-0ubuntu9.17_amd64.deb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libs/libc6_2.31-0ubuntu9.17_amd64/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>用patchelf修改vscode-server依赖的glibc版本</p><p>VSCode在1.99之后，有三个变量可以使用，这将使其自动运行patchelf而无需每次更新手动修改。在<code>~/.bashrc</code>中的<strong>最前面</strong>添加：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_CUSTOM_GLIBC_LINKER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_CUSTOM_GLIBC_PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_PATCHELF_PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/usr/bin/patchelf&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现除了glibc要更新外，c++的库也要更新libstdc++.so也要更新：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[23:43:36.713] [server] Patching glibc from /home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu:/home/lijunhui/package/libstdcxx/libs/lib32stdc++6_5.3.1-14ubuntu2_amd64/usr/lib32 with /usr/bin/patchelf...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[23:43:37.322] [server] Patching linker from /home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 with /usr/bin/patchelf...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[23:43:37.649] [server] Patching complete.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[23:43:37.661] [server] /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node: /lib64/libstdc++.so.6: version </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GLIBCXX_3.4.20&#39; not found (required by /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[23:43:37.661] [server] /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node: /lib64/libstdc++.so.6: version \`CXXABI_1.3.9&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not found (required by /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[23:43:37.661] [server] /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node: /lib64/libstdc++.so.6: version \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GLIBCXX_3.4.21</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&#39; not found (required by /root/.vscode-server/cli/servers/Stable-848b80aeb52026648a8ff9f7c45a9b0a80641e2e/server/node)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>下载较新的libstdc++库</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://mirror.tuna.tsinghua.edu.cn/ubuntu/pool/main/g/gcc-10/libstdc%2B%2B6_10.5.0-1ubuntu1~20.04_amd64.deb</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解压</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libs/libstdc++6_10.5.0-1ubuntu1~20.04_amd64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dpkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libstdc++6_10.5.0-1ubuntu1~20.04_amd64.deb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libs/libstdc++6_10.5.0-1ubuntu1~20.04_amd64</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新下配置：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_CUSTOM_GLIBC_LINKER</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_CUSTOM_GLIBC_PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/home/lijunhui/package/glibc/libs/libc6_2.31-0ubuntu9.17_amd64/lib/x86_64-linux-gnu:/home/lijunhui/package/libstdcxx/libs/libstdc++6_10.5.0-1ubuntu1~20.04_amd64/usr/lib/x86_64-linux-gnu&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> VSCODE_SERVER_PATCHELF_PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/usr/bin/patchelf&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_20250518" tabindex="-1"><a class="header-anchor" href="#_20250518"><span>20250518</span></a></h2><p>git 设置代理：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 全局设置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http.proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;http://proxy.server:port&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https.proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;https://proxy.server:port&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看设置情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http.proxy</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https.proxy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看libc.so的GLIBC版本，查看libstdc++.so的GLIBCXX版本</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>strings /lib64/libc.so.6 | grep GLIBC</span></span>
<span class="line"><span>strings /lib64/libstdc++.so.6 | grep GLIBCXX</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250527" tabindex="-1"><a class="header-anchor" href="#_20250527"><span>20250527</span></a></h2><p>使用atime查看文件最后一次被修改时间，要确保文件系统是否支持或启用了atime记录功能</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/dev/sda3&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 替换为实际路径或设备名（如 \`/dev/sda3\`）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 若输出包含 noatime 或 norelatime，则访问时间更新被禁用</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 若输出包含 relatime（默认值），系统仅在特定条件下更新 atime（如距上次访问超过24小时、文件被修改、文件被读取时当前 atime 早于或等于 mtime 或 ctime）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250604" tabindex="-1"><a class="header-anchor" href="#_20250604"><span>20250604</span></a></h2><p>gdb调试时可以直接调用程序中的函数，如：p (char*)dlerror()</p><p>查看动态库里引用的openssl的版本号：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">strings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.so</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;OpenSSL&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">OpenSSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1.1.1w</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250727" tabindex="-1"><a class="header-anchor" href="#_20250727"><span>20250727</span></a></h2><p><code>google breakpad</code>的使用教程：</p><p>git clone https://github.com/google/breakpad.git</p><p>git clone https://chromium.googlesource.com/breakpad/breakpad</p><p>git clone https://chromium.googlesource.com/linux-syscall-support</p><p>编译需要C++20，使用scl安装devtoolset-11</p><p>yum install devtoolset-11-gcc devtoolset-11-gcc-c++ devtoolset-11-binutils</p><p>编译需要third_party/lss/linux_syscall_support.h</p><p>mkdir -p third_party/lss</p><p>cp linux-syscall-support/linux_syscall_support.h third_party/lss/</p><p>在准备好源代码后，还不能直接开始编译，经过测试需要回退代码到</p><p><code>commit 7ea7ded187b4d739239f3ab7082fcd5a2ccc1eaa</code>才能编译通过</p><p>主要原因是最新代码中使用到的<code>SHF_COMPRESSED</code>在我们的编译环境中没有定义，直接编译会报错：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost breakpad]# make</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">g++</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -std=gnu++20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -DHAVE_CONFIG_H</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -I.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -I./src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -I./src</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    -g</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -O2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/common/linux/tools_linux_dump_syms_dump_syms-dump_symbols.o</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MF</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/common/linux/.deps/tools_linux_dump_syms_dump_syms-dump_symbols.Tpo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/common/linux/tools_linux_dump_syms_dump_syms-dump_symbols.o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> \`</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">test</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;src/common/linux/dump_symbols.cc&#39; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;./&#39;\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘bool</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {anonymous}::IsCompressedHeader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">const</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> typename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ElfClass::Shdr</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">’:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:298:31:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘SHF_COMPRESSED’</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> declared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  298</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |   </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (section-&gt;sh_flags &amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SHF_COMPRESSED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) !</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |                               </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^~~~~~~~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘std::pair</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">unsigned</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> char</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> long</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unsigned</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{anonymous}::UncompressSectionContents</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uint64_t,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> const</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uint8_t</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uint64_t,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uint64_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">’:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:349:27:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘ELFCOMPRESS_ZLIB’</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> declared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">did</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mean</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘ELFCOMPRESS_ZST’?</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  349</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |   </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">compression_type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ELFCOMPRESS_ZLIB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |                           </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^~~~~~~~~~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |                           </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ELFCOMPRESS_ZSTD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘bool</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {anonymous}::DwarfCFIRegisterNames</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">const</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> typename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ElfClass::Ehdr</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> std::vector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">std::basic_string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">cha</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">r&gt; &gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">’:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:539:10:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘EM_RISCV’</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> declared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">did</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mean</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘EM_PARISC’?</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  539</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |     case EM_RISCV:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EM_PARISC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> In</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> function</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘const</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> char</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {anonymous}::ElfArchitecture</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">const</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> typename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ElfClass::Ehdr</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">’:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:1120:10:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘EM_RISCV’</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> declared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">did</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mean</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘EM_PARISC’?</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 1120</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |     case EM_RISCV:      return </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;riscv&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EM_PARISC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">src/common/linux/dump_symbols.cc:1121:10:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ‘EM_NDS32’</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> was</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> declared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 1121</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |     case EM_NDS32:      return </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;nds32&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      |          </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^~~~~~~~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ***</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [src/common/linux/tools_linux_dump_syms_dump_syms-dump_symbols.o] 错误 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>全量编译需要回退到这个版本，避免使用<code>SHF_COMPRESSED</code></p><p><code>git reset --hard 7ea7ded187b4d739239f3ab7082fcd5a2ccc1eaa</code></p><p>如果不想回退代码，也可以只编译部分工具，经测试以下工具可以直接编译：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 只编译 src/processor/minidump_dump</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./configure</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/processor/minidump_dump</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 只编译 minidump_stackwalk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./configure</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/processor/minidump_stackwalk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>常用工具：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 提取符号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">google-breakpad/src/tools/linux/dump_syms/dump_syms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">test.sym</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.sym</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MODULE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> x86_64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6EDC6ACDB282125843FD59DA9C81BD830</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./symbols/test/6EDC6ACDB282125843FD59DA9C81BD830</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.sym</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./symbols/test/6EDC6ACDB282125843FD59DA9C81BD830</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">google-breakpad/src/processor/minidump_stackwalk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minidump.dmp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./symbols</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将minidump转换为coredump</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./minidump-2-core</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> e984de99-9e1b-43e3-27a3db99-90d3cc3f.dmp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">test.core</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 可以直接使用gdb进行调试</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gdb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> test.core</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250728" tabindex="-1"><a class="header-anchor" href="#_20250728"><span>20250728</span></a></h2><p>查看已安装软件包的卸载脚本：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rpm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --scripts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">package_nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_20250803" tabindex="-1"><a class="header-anchor" href="#_20250803"><span>20250803</span></a></h2><p>Linux子进程会默认继承父进程的文件描述符，包括已加锁的文件描述符</p><p>避免继承锁的方法：使用 <code>O_CLOEXEC</code> 标志打开文件，或通过 <code>fcntl(fd, F_SETFD, FD_CLOEXEC)</code> 设置文件描述符的关闭标志，阻止子进程继承文件描述符及其锁</p><h2 id="_20250818" tabindex="-1"><a class="header-anchor" href="#_20250818"><span>20250818</span></a></h2><p>Linux编译boost：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./bootstrap.sh</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># link=static → 生成静态库 .a</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># runtime-link=static → 链接时也使用静态运行库（可选，通常和 libstdc++、libgcc 静态化有关）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./b2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> link=static</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runtime-link=static</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --prefix=/usr/local/boost_1_86_0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --with-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --with-filesystem</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --with-thread</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Linux编译libcurl</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cmake -DBUILD_SHARED_LIBS=OFF \\</span></span>
<span class="line"><span>  -DBUILD_STATIC_LIBS=ON \\</span></span>
<span class="line"><span>  -DCURL_USE_OPENSSL=ON \\</span></span>
<span class="line"><span>  -DOPENSSL_USE_STATIC_LIBS=TRUE \\</span></span>
<span class="line"><span>  -DCMAKE_USE_OPENSSL=ON \\</span></span>
<span class="line"><span>  -DCMAKE_PREFIX_PATH=/home/bob/common/boost_1_68_0/3rdCode/openssl \\</span></span>
<span class="line"><span>  -DCMAKE_INSTALL_PREFIX=/home/bob/common/boost_1_68_0/3rdCode/curl \\</span></span>
<span class="line"><span>  -DCURL_USE_LIBPSL=OFF \\</span></span>
<span class="line"><span>  ..</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Linux编译python</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./configure</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --enable-optimizations</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    --with-openssl=/home/bob/common/boost_1_68_0/3rdCode/openssl</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    --enable-shared</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    LDFLAGS=&quot;-L/home/bob/common/boost_1_68_0/3rdCode/openssl/lib64&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    CPPFLAGS=&quot;-I/home/bob/common/boost_1_68_0/3rdCode/openssl/include&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> altinstall</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在低版本的gcc上编译带--enable-optimizations会导致如下错误：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Could</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> import</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runpy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> module</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250824" tabindex="-1"><a class="header-anchor" href="#_20250824"><span>20250824</span></a></h2><p>centos7.9升级内核：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://www.cnblogs.com/cx59/articles/18936156</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost python]# uname -r </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.10.0-1160.119.1.el7.x86_64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下载内核文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://mirrors.coreix.net/elrepo-archive-archive/kernel/el7/x86_64/RPMS/kernel-lt-5.4.225-1.el7.elrepo.x86_64.rpm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://mirrors.coreix.net/elrepo-archive-archive/kernel/el7/x86_64/RPMS/kernel-lt-devel-5.4.225-1.el7.elrepo.x86_64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装内核</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localinstall</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel-lt-5.4.225-1.el7.elrepo.x86_64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost temp]# rpm -q kernel</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kernel-3.10.0-1160.el7.x86_64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kernel-3.10.0-1160.119.1.el7.x86_64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost temp]# awk -F</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /etc/grub2.cfg</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (5.4.225-1.el7.elrepo.x86_64) 7 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (3.10.0-1160.119.1.el7.x86_64) 7 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (3.10.0-1160.el7.x86_64) 7 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (0-rescue-3e3231b4619e485c9e4a92c2f6ac8836) 7 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grub2-set-default</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grub2-mkconfig</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot/grub2/grub.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># docker跨平台运行</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --privileged</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tonistiigi/binfmt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ghcr.io/easybuilders/centos-7.9:2025-03-03-13626131526.124</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packpack/packpack:centos-7-aarch64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vesoft/third-party-build:centos-7-aarch64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --rm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --platform=linux/arm64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bc0e663a057f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编译流程：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置代理</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> http_proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">://</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">192</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">7890</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> https_proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">://</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">192</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">168</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">7890</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装 pip</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python3-pip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 装opencv-python依赖工具</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scikit-build</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mss</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> opencv-python</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nuitka</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --onefile</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --standalone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> qrscan.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 列出所有已启用的 yum 源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> repolist</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_20250904" tabindex="-1"><a class="header-anchor" href="#_20250904"><span>20250904</span></a></h2><p><strong>std::string的ABI断裂</strong></p><ol><li><p><code>GCC 4.x</code> 旧 ABI (COW 实现)</p><p>使用 引用计数 实现 <code>Copy-On-Write</code></p><p>内存布局：<code>{ char* data, size_t length, size_t capacity, refcount* }</code></p><p>典型符号：<code>GLIBCXX_3.4.5 (对应 GCC 4.x)</code></p></li><li><p><code>GCC 5+</code> 新 ABI (SSO 实现)</p><p>使用 短字符串优化 (<code>SSO</code>)</p><p>内存布局：<code>union { char[16] local_buf; struct{ char* ptr, size_t len, size_t cap } }</code></p><p>典型符号：<code>GLIBCXX_3.4.21 (对应 GCC 5+)</code></p></li></ol><p>不同ABI编译出来的elf文件相关调用时，如果函数传递std::string相关的参数并访问时，则会崩溃</p><h2 id="_20250906" tabindex="-1"><a class="header-anchor" href="#_20250906"><span>20250906</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将创建一个40GB的虚拟磁盘（动态分配空间）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">qemu-img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> qcow2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS8.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 40G</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># -smp后面的数字是CPU核心数；-m后面的数字是内存大小</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">qemu-img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> qcow2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CentOS7.9.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 40G</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">qemu-system-aarch64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cpu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cortex-a72</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -smp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8192</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -bios</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> QEMU_EFI.fd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VGA</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nec-usb-xhci</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usb-mouse</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usb-kbd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -drive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if=none,file=CentOS7.9.img,id=hd0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtio-blk-device,drive=hd0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -drive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if=none,file=CentOS-7-aarch64-Everything-2009.iso,id=cdrom,media=cdrom</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtio-scsi-device</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scsi-cd,drive=cdrom</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nic</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tap,ifname=tap0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">qemu-system-aarch64</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cpu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cortex-a72</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -smp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8192</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -bios</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> QEMU_EFI.fd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VGA</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nec-usb-xhci</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usb-mouse</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usb-kbd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -drive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file=CentOS7.9.img,format=qcow2,if=virtio</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -netdev</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user,id=net0,hostfwd=tcp::2222-:22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> virtio-net-device,netdev=net0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nic</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tap,ifname=tap0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># centos 7.9 yum源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/yum.repos.d/backup</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/yum.repos.d/CentOS-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/yum.repos.d/backup/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/yum.repos.d/CentOS-Vault.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[C7.9.2009-base]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CentOS-7.9.2009</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Base</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">baseurl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">http://vault.centos.org/7.9.2009/os/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$basearch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgcheck</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgkey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[C7.9.2009-updates]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CentOS-7.9.2009</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Updates</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">baseurl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">http://vault.centos.org/7.9.2009/updates/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$basearch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgcheck</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgkey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[C7.9.2009-extras]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CentOS-7.9.2009</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Extras</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">baseurl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">http://vault.centos.org/7.9.2009/extras/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$basearch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgcheck</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gpgkey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,68)])])}const d=i(h,[["render",e]]),r=JSON.parse('{"path":"/Note/%E5%AE%9E%E6%97%B6%E7%AC%94%E8%AE%B0.html","title":"实时笔记","lang":"zh-CN","frontmatter":{"description":"实时笔记 20250514 SYSTEM 权限的进程运行在 Session 0，和用户 Session 隔离 而桌面用户是从 Session 1 或更高编号开始的 由于会话隔离，Session 0 中的进程无法接收来自交互桌面的输入 20250517 VScode 1.86 版本的 remote 要求 glibc 2.28 及以上，(libstdc++...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"实时笔记\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-06T05:40:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"灰灰烟影\\",\\"url\\":\\"http://hugo.work\\"}]}"],["meta",{"property":"og:url","content":"http://hugo.work/Note/%E5%AE%9E%E6%97%B6%E7%AC%94%E8%AE%B0.html"}],["meta",{"property":"og:site_name","content":"灰灰烟影"}],["meta",{"property":"og:title","content":"实时笔记"}],["meta",{"property":"og:description","content":"实时笔记 20250514 SYSTEM 权限的进程运行在 Session 0，和用户 Session 隔离 而桌面用户是从 Session 1 或更高编号开始的 由于会话隔离，Session 0 中的进程无法接收来自交互桌面的输入 20250517 VScode 1.86 版本的 remote 要求 glibc 2.28 及以上，(libstdc++..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-06T05:40:57.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-06T05:40:57.000Z"}]]},"git":{"createdTime":1747067216000,"updatedTime":1757137257000,"contributors":[{"name":"HooYing","username":"HooYing","email":"1161844396@qq.com","commits":13,"url":"https://github.com/HooYing"}]},"readingTime":{"minutes":6.36,"words":1907},"filePathRelative":"Note/实时笔记.md","excerpt":"","autoDesc":true}');export{d as comp,r as data};
